---
ai_context_version: 1.1

project:
  name: wgx
  summary: CLI orchestrator for dev/ops tasks and multi-agent flows.
  role: tooling_orchestration
  primary_language: bash
  visibility: internal

heimgewebe:
  axis: [Motorik, Commands]
  fleet:
    enabled: true
  wgx:
    profile_expected: false
    guard_smoke_expected: false

interfaces:
  consumes:
    - "repo trees (git)"
    - "workflows (.github/workflows/*)"
  produces:
    - "guard/smoke artifacts"
    - "fleet.health signals"

contracts:
  schemas:
    - path: "contracts/*.schema.json"
      note: "WGX does not define canonical contracts; it enforces/uses them."

dependencies:
  internal:
    - name: contracts-mirror
      relationship: uses
      interface: [schemas, protobuf_mirror]
    - name: metarepo
      relationship: uses
      interface: [templates, policies]
  external:
    - name: bash
      version: ">=4"

architecture:
  entrypoints:
    - wgx
    - cmd/*
  key_paths:
    - path: wgx/
      purpose: "CLI core"
    - path: templates/
      purpose: "Reusable workflow/templates"
    - path: scripts/
      purpose: "Maintenance + validators"

boundaries:
  not_responsible_for:
    - "Being the canonical source of repo roles (metarepo is)."
    - "Inventing schema changes; it consumes existing contracts."
  dangerous_assumptions:
    - "Assume a repo is Fleet-enabled without checking .wgx/profile.yml."
    - "Assume repo naming: verify contracts-mirror vs contracts."

conventions:
  branching: "main, feature/*"
  commit_prefix: "wgx"
  ci_platform: github_actions

documentation:
  runbook: docs/runbook.md

ai_guidance:
  do:
    - compose subcommands; avoid global mutable state
  dont:
    - hardcode repo-specific paths in core modules
