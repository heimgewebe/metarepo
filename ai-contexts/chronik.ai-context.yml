---
ai_context_version: 1.1

project:
  name: chronik
  summary: Append-only event memory; stores event.line as the system backbone.
  role: event_store
  primary_language: mixed
  visibility: internal

heimgewebe:
  axis: [Events, Contracts]
  fleet:
    enabled: true
  wgx:
    profile_expected: true
    guard_smoke_expected: true

interfaces:
  consumes:
    - "event.line (validated)"
  produces:
    - "event queries/streams"
    - "snapshots for semantAH/hausKI"

contracts:
  schemas:
    - path: "contracts/*.schema.json"
      note: "event.line is canonical backbone; be strict."

dependencies:
  internal:
    - name: contracts-mirror
      relationship: uses
      interface:
        - schema_validation
  external: []
  # NOTE: 'external: []' means "not verified from metarepo context".
  # Prefer 'unknown' over false precision; verify in repo before asserting tech stack.

architecture:
  entrypoints:
    - cmd/*
  key_paths:
    - path: docs/
      purpose: "Data model, retention, invariants"

boundaries:
  not_responsible_for:
    - "Generating meaning/insights (semantAH)."
    - "Executing commands (wgx/hausKI)."
  dangerous_assumptions:
    - "Treat event store as mutable."
    - "Accept events without contract validation."

conventions:
  branching: "main, feature/*, hotfix/*"
  commit_prefix: "chronik"
  ci_platform: github_actions

documentation:
  adr: docs/adrs/
  runbook: docs/runbook.md

ai_guidance:
  do:
    - pull validation rules from contracts and reject non-conforming events
    - prefer structured logs via tracing; avoid println! in hot paths
  dont:
    - accept payloads without schema validation
