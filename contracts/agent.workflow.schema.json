{
 "$schema": "https://json-schema.org/draft/2020-12/schema",
 "$id": "https://schemas.heimgewebe.org/agent.workflow.schema.json",
 "title": "Agent Workflow Manifest",
 "type": "object",
 "additionalProperties": false,
 "properties": {
  "workflow_id": { "type": "string", "minLength": 1 },
  "orchestration": { "type": "string", "enum": ["sequential", "parallel", "graph"] },
  "agents": {
   "type": "array",
   "minItems": 1,
   "items": {
    "type": "object",
    "required": ["agent_type", "id"],
    "additionalProperties": false,
    "properties": {
     "id": { "type": "string" },
     "agent_type": { "type": "string", "enum": ["code", "knowledge", "research", "supervisor"] },
     "capabilities": { "type": "array", "items": { "type": "string" }, "default": [] },
     "inputs": { "type": "object", "additionalProperties": true },
     "outputs": { "type": "object", "additionalProperties": true }
    }
   }
  },
  "policies": {
   "type": "object",
   "additionalProperties": false,
   "properties": {
    "retry_strategy": { "type": "object", "additionalProperties": true },
    "timeout": { "type": "integer", "minimum": 1 },
    "cost_limits": { "type": "object", "additionalProperties": true }
   }
  }
 },
 "required": ["workflow_id", "orchestration", "agents"]
}
