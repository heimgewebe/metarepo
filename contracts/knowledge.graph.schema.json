{
 "$schema": "https://json-schema.org/draft/2020-12/schema",
 "$id": "https://schemas.heimgewebe.org/knowledge.graph.schema.json",
 "title": "Knowledge Graph Export",
 "type": "object",
 "additionalProperties": false,
 "properties": {
 "nodes": {
 "type": "array",
 "items": {
 "type": "object",
 "additionalProperties": false,
 "properties": {
 "id": { "type": "string", "minLength": 1 },
 "type": { "type": "string", "enum": ["concept", "code_entity", "document", "decision"] },
 "labels": { "type": "array", "items": { "type": "string" }, "default": [] },
 "props": { "type": "object", "additionalProperties": true }
 },
 "required": ["id", "type"]
 },
 "default": []
 },
 "edges": {
 "type": "array",
 "items": {
 "type": "object",
 "additionalProperties": false,
 "properties": {
 "source": { "type": "string", "minLength": 1 },
 "target": { "type": "string", "minLength": 1 },
 "relation": {
 "type": "string",
 "enum": ["implements", "references", "supersedes", "depends_on", "mentions", "fixes", "has_smell"]
 },
 "weight": { "type": "number" },
 "meta": { "type": "object", "additionalProperties": true }
 },
 "required": ["source", "target", "relation"]
 },
 "default": []
 },
 "metadata": {
 "type": "object",
 "additionalProperties": false,
 "properties": {
 "last_updated": { "type": "string", "format": "date-time" },
 "authors": { "type": "array", "items": { "type": "string" }, "default": [] },
 "tags": { "type": "array", "items": { "type": "string" }, "default": [] }
 },
 "default": {}
 }
 },
 "required": ["nodes", "edges"]
}
