{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://schemas.heimgewebe.org/contracts/policy.weight_adjustment.schema.json",
  "title": "heimlern policy weight adjustment",
  "x-producers": ["heimlern"],
  "x-consumers": ["hausKI"],
  "type": "object",
  "required": ["policy_ref", "old_weight", "new_weight", "timestamp", "reason"],
  "properties": {
    "policy_ref": {
      "type": "string",
      "description": "Referenz auf die Policy, deren Gewicht angepasst wurde."
    },
    "old_weight": {
      "type": "number",
      "description": "Das Gewicht vor der Anpassung."
    },
    "new_weight": {
      "type": "number",
      "description": "Das neue Gewicht."
    },
    "adjustment_delta": {
      "type": "number",
      "description": "Die Differenz (new - old)."
    },
    "reason": {
      "type": "string",
      "description": "Grund für die Anpassung (z.B. Feedback-Loop)."
    },
    "timestamp": {
      "type": "string",
      "format": "date-time"
    },
    "source_event_ref": {
      "type": "string",
      "description": "Referenz auf das Event (z.B. decision.outcome), das die Anpassung auslöste."
    }
  },
  "additionalProperties": false
}
